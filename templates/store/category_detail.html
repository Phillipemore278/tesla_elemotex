{% extends '../frontend/base.html' %}
{% load static %}
{% load humanize %}

{% block content %}
<!-- breadcrumb -->
<div class="site-breadcrumb" style="background: url(/static/frontend/assets/img/breadcrumb/01.jpg)">
    <div class="container">
        <h2 class="breadcrumb-title">{{category.name}}</h2>
        <ul class="breadcrumb-menu">
            <li><a href="index.html">Home</a></li>
            <li class="active">Listing {{category.name}} Inventory</li>
        </ul>
    </div>
</div>
<!-- breadcrumb end -->



<!-- car area -->
<div class="car-area grid bg py-120">
    <div class="container">
        <div class="row">
            <div class="col-lg-3">
                <div class="car-sidebar">
                    <div class="car-widget">
                        <h4 class="car-widget-title">Models</h4>
                        <form method="get" id="category-filter-form">
                            <ul>
                                <li>
                                    <div class="form-check">
                                            <input class="form-check-input" type="radio" id="brand" name="category" value="all" {% if selected_slug == "all" %}checked {% elif not selected_slug %}checked {% endif %}>
                                            <label class="form-check-label" for="brand"> All Models</label>
                                    </div>
                                </li>
                                {% for cat in categories %}
                                    <li>
                                        <div class="form-check">
                                            <input class="form-check-input" type="radio" name="category"
                                                value="{{ cat.slug }}" id="category_{{ cat.slug }}"
                                                {% if selected_slug == '{{cat.slug}}' %}checked{% endif %}>
                                            <label class="form-check-label" for="category_{{ cat.slug }}">
                                                {{ cat.name }}
                                            </label>
                                        </div>
                                    </li>
                                {% endfor %}
                                <p class="text-danger">{{selected_slug}}</p>
                            </ul>
                        </form>
                    </div>
                    <div class="car-widget">
                        <h4 class="car-widget-title">Price Range</h4>
                        <div class="price-range-box">
                            <div class="price-range-input">
                                <input type="text" id="price-amount" readonly>
                            </div>
                            <div class="price-range"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-9">
                <div class="col-md-12">
                    <div class="car-sort">
                        <h6>Showing 1-10 of 50 available {{category.name}} Series</h6>
                        <div class="car-sort-list-grid">
                            <a class="car-sort-grid active" href="#"><i
                                    class="far fa-grid-2"></i></a>
                            
                        </div>
                        <!-- <div class="col-md-3 car-sort-box">
                            <select class="select">
                                <option value="1">Sort By Default</option>
                                <option value="5">Sort By Featured</option>
                                <option value="2">Sort By Latest</option>
                                <option value="3">Sort By Low Price</option>
                                <option value="4">Sort By High Price</option>
                            </select>
                        </div> -->
                    </div>
                </div>
                <div class="row">
                    {% for car in car_list %}
                    <div class="col-md-6 col-lg-4">
                        <div class="car-item">
                            <div class="car-img">
                                {% if car.is_on_promo %}
                                    <span class="car-status status-2">Promo</span>
                                {% endif %}

                                {% if car.featured_image %}
                                    <img src="{{car.featured_image.image.url}}" alt="{{car..featured_image.alt_text}}">
                                {% else %}
                                    <img src="{% static 'images/placeholder.png' %}" alt="No image available">
                                {% endif %}
                                <div class="car-btns">
                                    <a href="#"><i class="far fa-heart"></i></a>
                                    <a href="{% url 'frontend:single_car_details' car.slug %}"><i class="far fa-arrows-repeat"></i></a>
                                </div>
                            </div>
                            <div class="car-content">
                                <div class="car-top">
                                    <h4><a href="#">{{car.title}} | {{ car.category.name}}</a></h4>
                                </div>
                                <ul class="car-list">
                                    <li><i class="far fa-steering-wheel"></i>{{car.miles}}</li>
                                    <li><i class="far fa-road"></i>{{car.car_range}}</li>
                                    <li><i class="far fa-car"></i>Year: {{car.year}}</li>
                                    <li><i class="far fa-gas-pump"></i>{{car.top_speed}}</li>
                                </ul>
                                <div class="car-footer">
                                    <span class="car-price">${{car.price|intcomma}}</span>
                                    <a href="{% url 'frontend:single_car_details' car.slug %}" class="theme-btn"><span class="far fa-eye"></span>Order Now</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
                <!-- pagination -->
                <div class="pagination-area">
                    <div aria-label="Page navigation example">
                        <ul class="pagination">
                            <li class="page-item">
                                <a class="page-link" href="#" aria-label="Previous">
                                    <span aria-hidden="true"><i class="far fa-arrow-left"></i></span>
                                </a>
                            </li>
                            <li class="page-item active"><a class="page-link" href="#">1</a></li>
                            <li class="page-item"><a class="page-link" href="#">2</a></li>
                            <li class="page-item"><a class="page-link" href="#">3</a></li>
                            <li class="page-item">
                                <a class="page-link" href="#" aria-label="Next">
                                    <span aria-hidden="true"><i class="far fa-arrow-right"></i></span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                <!-- pagination end -->
            </div>
        </div>
    </div>
</div>
<!-- car area end -->



<script>
    document.querySelectorAll('.form-check-input').forEach(input => {
        input.addEventListener('change', () => {
            document.getElementById('category-filter-form').submit();
        });
    });
</script>
{% endblock %}